\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{graphicx}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{geometry}
\usepackage{fancyhdr}
\usepackage{amsmath, amssymb}
\usepackage{amssymb}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{ragged2e}
\usepackage{enumitem}
\usepackage{setspace}
\usepackage{microtype}
\usepackage{ragged2e}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{fancybox}
\usepackage{mdframed}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[spanish]{babel}
\usepackage{inconsolata}
\usepackage[most]{tcolorbox}
\usepackage{booktabs}
\usepackage{csquotes}
\usepackage[style=authoryear]{biblatex}

%Diseño del cuadro para imagen
\newmdenv[
    backgroundcolor=gray!5,
    linecolor=gray!60,
    linewidth=1.2pt,
    roundcorner=10pt,
    skipabove=12pt,
    skipbelow=12pt,
    nobreak=true
]{imagenbox}

% Definición de entornos didácticos
\newtcolorbox{goals}{
    colback=green!5!white,
    colframe=green!75!black,
    fonttitle=\bfseries,
    title=Objetivos de aprendizaje,
    enhanced,
    shadow={1mm}{-1mm}{0mm}{black!50!white}
}

\newtcolorbox{example}{
    colback=orange!5!white,
    colframe=orange!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{concept}{
    colback=blue!5!white,
    colframe=blue!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{law}{
    colback=red!5!white,
    colframe=red!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{resolution}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{platform}{
    colback=brown!5!white,
    colframe=brown!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{application}{
    colback=teal!5!white,
    colframe=teal!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{consideration}{
    colback=green!5!white,
    colframe=green!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{warning}{
    colback=yellow!10!white,
    colframe=red!75!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{future}{
    colback=cyan!5!white,
    colframe=cyan!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

% En el preámbulo
\newtcolorbox{summary}[2]{ 
    colback=#2!10!white,
    colframe=#2!50!black,
    fonttitle=\bfseries,
    title=#1,
    enhanced,
    shadow={1mm}{-1mm}{0mm}{black!30!white}
}

\newtcolorbox{spectral}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{temporal}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{radiometric}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{spectrum}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{interaction}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\newtcolorbox{innovation}{
    colback=purple!5!white,
    colframe=purple!50!black,
    left=5mm,
    right=5mm,
    top=1mm,
    bottom=1mm
}

\lstset{
    basicstyle=\ttfamily\small,       % Fuente monoespaciada
    keywordstyle=\color{blue}\bfseries, % Palabras clave en azul
    commentstyle=\color{gray},        % Comentarios en gris
    stringstyle=\color{teal},         % Cadenas en verde azulado
    numbers=none,                     % Sin numeración de líneas
    frame=single,                     % Cuadro alrededor del bloque
    framerule=0.5pt,
    breaklines=true,                  % Romper líneas largas
    tabsize=4,
    showstringspaces=false,
    literate={á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1 
             {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
             {ñ}{{\~n}}1 {Ñ}{{\~N}}1
             {¿}{{?`}}1 {¡}{{!`}}1
             {→}{{$\rightarrow$}}1 {⇒}{{$\Rightarrow$}}1
             {≤}{{$\leq$}}1 {≥}{{$\geq$}}1
             {«}{{\guillemotleft}}1 {»}{{\guillemotright}}1
}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=none,                    % Sin numeración
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}


\lstset{style=mystyle}
\geometry{
    paperwidth=216mm,
    paperheight=279mm,
    left=25mm,
    right=25mm,
    top=25mm,
    bottom=25mm
}

\setlength{\headheight}{29.11858pt}

\let\cleardoublepage\clearpage

\microtypecontext{spacing=nonfrench}
\setstretch{1.1}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{\leftmark}
\fancyfoot[C]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

\titleformat{\chapter}[display]
{\normalfont\huge\bfseries\centering}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{30pt}{40pt}

\titleformat{\section}
{\normalfont\Large\bfseries}{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}

\titleformat{\subsection}
{\normalfont\large\bfseries}{\thesubsection}{1em}{}
\titlespacing*{\subsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\setlist[itemize]{leftmargin=*, topsep=5pt}
\setlist[enumerate]{leftmargin=*, topsep=5pt}

\contentsmargin{0cm}
\titlecontents{chapter}[0em]{\vspace{8pt}\bfseries}
{\contentslabel[\thecontentslabel]{1.5em}}{}
{\hfill\contentspage}
\titlecontents{section}[1.5em]{}
{\contentslabel[\thecontentslabel]{2.3em}}{}
{\titlerule*[8pt]{.}\contentspage}